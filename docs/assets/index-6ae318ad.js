import{x as be,A as ve,aj as _,e as S,B as _e,C as Ne,F as ne,ad as Ve,I as E,$ as A,G as Ie,V as ye,ak as he,o as N,c as h,l as X,k as t,N as Y,a1 as B,f as d,w as p,a as $,Z as ge,aX as Ee,E as q,g as J,Y as we,aY as xe,P as T,_ as Ce,al as Se,aA as Pe,M as ke,D as Fe,h as y,t as te,S as ae,b as x,W as Ae,aZ as Be}from"./index-b51d972b.js";import{E as $e}from"./card-202e9b28.js";/* empty css            */import{E as Te}from"./input-ec4ceaca.js";import{u as De,a as je,b as Me,E as re}from"./button-73d318ec.js";import{E as se}from"./index-f2f55b70.js";import{C as le,I as D,U as w,t as ze,d as Q}from"./event-e06a23af.js";import{i as C}from"./isNil-c75b1b34.js";import{v as ee}from"./index-67d1344b.js";import"./index-a078c85b.js";const Ke=be({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ve,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||_(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),Oe={[le]:(r,f)=>f!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[D]:r=>_(r)||C(r),[w]:r=>_(r)||C(r)},Ue=["aria-label","onKeydown"],Ye=["aria-label","onKeydown"],Ge=S({name:"ElInputNumber"}),Re=S({...Ge,props:Ke,emits:Oe,setup(r,{expose:f,emit:l}){const a=r,{t:v}=_e(),o=Ne("input-number"),m=ne(),u=Ve({currentValue:a.modelValue,userInput:null}),{formItem:V}=De(),R=E(()=>_(a.modelValue)&&a.modelValue<=a.min),W=E(()=>_(a.modelValue)&&a.modelValue>=a.max),oe=E(()=>{const e=Z(a.step);return A(a.precision)?Math.max(Z(a.modelValue),e):(e>a.precision,a.precision)}),j=E(()=>a.controls&&a.controlsPosition==="right"),L=je(),g=Me(),M=E(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(C(e))return"";if(_(e)){if(Number.isNaN(e))return"";A(a.precision)||(e=e.toFixed(a.precision))}return e}),z=(e,n)=>{if(A(n)&&(n=oe.value),n===0)return Math.round(e);let s=String(e);const i=s.indexOf(".");if(i===-1||!s.replace(".","").split("")[i+n])return e;const k=s.length;return s.charAt(k-1)==="5"&&(s=`${s.slice(0,Math.max(0,k-1))}6`),Number.parseFloat(Number(s).toFixed(n))},Z=e=>{if(C(e))return 0;const n=e.toString(),s=n.indexOf(".");let i=0;return s!==-1&&(i=n.length-s-1),i},H=(e,n=1)=>_(e)?z(e+a.step*n):u.currentValue,K=()=>{if(a.readonly||g.value||W.value)return;const e=Number(M.value)||0,n=H(e);P(n),l(D,u.currentValue)},O=()=>{if(a.readonly||g.value||R.value)return;const e=Number(M.value)||0,n=H(e,-1);P(n),l(D,u.currentValue)},U=(e,n)=>{const{max:s,min:i,step:c,precision:I,stepStrictly:k,valueOnClear:F}=a;s<i&&ze("InputNumber","min should not be greater than max.");let b=Number(e);if(C(e)||Number.isNaN(b))return null;if(e===""){if(F===null)return null;b=Se(F)?{min:i,max:s}[F]:F}return k&&(b=z(Math.round(b/c)*c,I)),A(I)||(b=z(b,I)),(b>s||b<i)&&(b=b>s?s:i,n&&l(w,b)),b},P=(e,n=!0)=>{var s;const i=u.currentValue,c=U(e);if(!n){l(w,c);return}i!==c&&(u.userInput=null,l(w,c),l(le,c,i),a.validateEvent&&((s=V==null?void 0:V.validate)==null||s.call(V,"change").catch(I=>Q())),u.currentValue=c)},ie=e=>{u.userInput=e;const n=e===""?null:Number(e);l(D,n),P(n,!1)},ce=e=>{const n=e!==""?Number(e):"";(_(n)&&!Number.isNaN(n)||e==="")&&P(n),u.userInput=null},de=()=>{var e,n;(n=(e=m.value)==null?void 0:e.focus)==null||n.call(e)},me=()=>{var e,n;(n=(e=m.value)==null?void 0:e.blur)==null||n.call(e)},pe=e=>{l("focus",e)},fe=e=>{var n;l("blur",e),a.validateEvent&&((n=V==null?void 0:V.validate)==null||n.call(V,"blur").catch(s=>Q()))};return Ie(()=>a.modelValue,e=>{const n=U(u.userInput),s=U(e,!0);!_(n)&&(!n||n!==s)&&(u.currentValue=s,u.userInput=null)},{immediate:!0}),ye(()=>{var e;const{min:n,max:s,modelValue:i}=a,c=(e=m.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(s)?c.setAttribute("aria-valuemax",String(s)):c.removeAttribute("aria-valuemax"),Number.isFinite(n)?c.setAttribute("aria-valuemin",String(n)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(u.currentValue)),c.setAttribute("aria-disabled",String(g.value)),!_(i)&&i!=null){let I=Number(i);Number.isNaN(I)&&(I=null),l(w,I)}}),he(()=>{var e;const n=(e=m.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${u.currentValue}`)}),f({focus:de,blur:me}),(e,n)=>(N(),h("div",{class:Y([t(o).b(),t(o).m(t(L)),t(o).is("disabled",t(g)),t(o).is("without-controls",!e.controls),t(o).is("controls-right",t(j))]),onDragstart:n[1]||(n[1]=T(()=>{},["prevent"]))},[e.controls?X((N(),h("span",{key:0,role:"button","aria-label":t(v)("el.inputNumber.decrease"),class:Y([t(o).e("decrease"),t(o).is("disabled",t(R))]),onKeydown:B(O,["enter"])},[d(t(q),null,{default:p(()=>[t(j)?(N(),$(t(ge),{key:0})):(N(),$(t(Ee),{key:1}))]),_:1})],42,Ue)),[[t(ee),O]]):J("v-if",!0),e.controls?X((N(),h("span",{key:1,role:"button","aria-label":t(v)("el.inputNumber.increase"),class:Y([t(o).e("increase"),t(o).is("disabled",t(W))]),onKeydown:B(K,["enter"])},[d(t(q),null,{default:p(()=>[t(j)?(N(),$(t(we),{key:0})):(N(),$(t(xe),{key:1}))]),_:1})],42,Ye)),[[t(ee),K]]):J("v-if",!0),d(t(Te),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":t(M),placeholder:e.placeholder,readonly:e.readonly,disabled:t(g),size:t(L),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=T(()=>{},["prevent"])),onKeydown:[B(T(K,["prevent"]),["up"]),B(T(O,["prevent"]),["down"])],onBlur:fe,onFocus:pe,onInput:ie,onChange:ce},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var We=Ce(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Le=Pe(We);function Ze(){const r=Symbol();function f(a){return ke(r,a),a}function l(){return Fe(r)}return{useProvide:f,useInject:l}}const{useProvide:He,useInject:Xe}=Ze();function G(){let r=ne(0);function f(v){r.value=v}const l={count:r,setCount:f};function a(){return He(l)}return{useProvide:a,useInject:Xe}}const ue=S({__name:"index",setup(r){const{useInject:f}=G(),{count:l,setCount:a}=f();return(v,o)=>{const m=re;return N(),h("div",null,[d(m,{type:"primary",plain:"",onClick:o[0]||(o[0]=u=>t(a)(t(l)+1))},{default:p(()=>[y(te(t(l)),1)]),_:1}),ae(v.$slots,"default")])}}}),qe={class:"mb-16px"},Je=S({__name:"index",setup(r){const{useInject:f}=G(),{count:l,setCount:a}=f();return(v,o)=>{const m=re,u=se;return N(),h(Ae,null,[x("div",qe,[d(m,{type:"danger",plain:"",onClick:o[0]||(o[0]=V=>t(a)(t(l)-1))},{default:p(()=>[y(te(t(l)),1)]),_:1}),ae(v.$slots,"default")]),d(ue,null,{default:p(()=>[d(u,{class:"ml-8px"},{default:p(()=>[y("孙")]),_:1})]),_:1})],64)}}}),Qe=x("span",{class:"text-18px"},"共享上下文",-1),en={class:"mb-16px"},nn={class:"mb-16px"},pn=S({__name:"index",setup(r){const{useProvide:f}=G(),{count:l}=f();return(a,v)=>{const o=Le,m=se,u=$e;return N(),h("div",null,[d(u,null,{header:p(()=>[Qe]),default:p(()=>[x("div",en,[d(o,{modelValue:t(l),"onUpdate:modelValue":v[0]||(v[0]=V=>Be(l)?l.value=V:null)},null,8,["modelValue"]),d(m,{class:"ml-8px"},{default:p(()=>[y("父")]),_:1})]),x("div",nn,[d(t(ue),null,{default:p(()=>[d(m,{class:"ml-8px"},{default:p(()=>[y("子")]),_:1}),d(m,{type:"warning",class:"ml-8px"},{default:p(()=>[y("兄")]),_:1})]),_:1})]),x("div",null,[d(t(Je),null,{default:p(()=>[d(m,{class:"ml-8px"},{default:p(()=>[y("子")]),_:1}),d(m,{type:"warning",class:"ml-8px"},{default:p(()=>[y("弟")]),_:1})]),_:1})])]),_:1})])}}});export{pn as default};
